<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Galeri Media Premium - Semua Jenis File</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css">

  <style>
    :root {
      --primary-color: #2563eb;
      --secondary-color: #4f46e5;
      --accent-color: #f59e0b;
      --danger-color: #ef4444;
      --success-color: #10b981;
      --dark-bg: #0f172a;
      --dark-card: #1e293b;
      --dark-border: #334155;
      --light-bg: #f8fafc;
      --light-card: #ffffff;
      --light-border: #e2e8f0;
      --text-primary: #1e293b;
      --text-secondary: #64748b;
      --text-light: #94a3b8;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      --radius: 0.75rem;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      --navbar-height: 80px;
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.2);
    }

    body.dark {
      --bg-color: var(--dark-bg);
      --card-bg: var(--dark-card);
      --border-color: var(--dark-border);
      --text-color: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-light: #94a3b8;
      --glass-bg: rgba(30, 41, 59, 0.7);
      --glass-border: rgba(255, 255, 255, 0.1);
    }

    body:not(.dark) {
      --bg-color: var(--light-bg);
      --card-bg: var(--light-card);
      --border-color: var(--light-border);
      --text-color: var(--text-primary);
      --text-secondary: var(--text-secondary);
      --text-light: var(--text-light);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      transition: var(--transition);
      padding-top: var(--navbar-height);
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Parallax Background */
    .parallax-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      opacity: 0.05;
      transform: translateY(0);
      transition: transform 0.5s ease-out;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: var(--bg-color);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }

    .loading-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 4px solid rgba(37, 99, 235, 0.2);
      border-top: 4px solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    .loading-text {
      font-size: 1.2rem;
      font-weight: 500;
      color: var(--text-secondary);
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Navbar Styles */
    .navbar {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      box-shadow: var(--shadow-md);
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      height: var(--navbar-height);
      transition: var(--transition);
    }

    .navbar-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0.75rem 1rem;
      height: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .navbar-brand {
      font-weight: 700;
      font-size: 1.5rem;
      color: white !important;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: var(--transition);
    }

    .navbar-brand:hover {
      transform: scale(1.05);
    }

    .navbar-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .form-control, .form-select {
      border-radius: var(--radius);
      border: 1px solid var(--border-color);
      background-color: var(--card-bg);
      color: var(--text-color);
      padding: 0.5rem 0.75rem;
      font-weight: 500;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
      width: 120px;
      font-size: 0.875rem;
    }

    .form-control:focus, .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      outline: none;
      transform: translateY(-2px);
    }

    /* Search Input with Suggestions */
    .search-container {
      position: relative;
    }

    .search-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: var(--radius);
      box-shadow: var(--shadow-lg);
      z-index: 100;
      max-height: 200px;
      overflow-y: auto;
      display: none;
    }

    .search-suggestions.active {
      display: block;
    }

    .suggestion-item {
      padding: 0.5rem 0.75rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .suggestion-item:hover {
      background-color: rgba(37, 99, 235, 0.1);
    }

    .suggestion-item.highlighted {
      background-color: rgba(37, 99, 235, 0.2);
    }

    /* Theme Toggle */
    .theme-toggle {
      position: relative;
      width: 50px;
      height: 25px;
      background-color: rgba(255, 255, 255, 0.2);
      border-radius: 25px;
      cursor: pointer;
      transition: var(--transition);
    }

    .theme-toggle-slider {
      position: absolute;
      top: 2.5px;
      left: 2.5px;
      width: 20px;
      height: 20px;
      background-color: white;
      border-radius: 50%;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    body.dark .theme-toggle-slider {
      transform: translateX(25px);
    }

    /* Main Content */
    .container-fluid {
      padding: 2rem;
      max-width: 1400px;
      margin: 0 auto;
    }

    .section-title {
      font-weight: 700;
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 0.75rem;
      position: relative;
    }

    .section-title::after {
      content: '';
      flex: 1;
      height: 2px;
      background: linear-gradient(to right, var(--primary-color), transparent);
      margin-left: 1rem;
    }

    .section-title i {
      color: var(--primary-color);
    }

    /* Filter Section with Glassmorphism */
    .filter-section {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius);
      padding: 1.5rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--glass-border);
      transition: var(--transition);
    }

    .filter-section:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
    }

    .filter-title {
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text-color);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .filter-controls {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .filter-group label {
      font-weight: 500;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    /* Stats Section with Enhanced Cards */
    .stats-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: linear-gradient(135deg, var(--card-bg), rgba(255, 255, 255, 0.05));
      border-radius: var(--radius);
      padding: 1.5rem;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--border-color);
      transition: var(--transition);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-xl);
    }

    .stat-icon {
      font-size: 2rem;
      margin-bottom: 0.75rem;
      color: var(--primary-color);
      transition: var(--transition);
    }

    .stat-card:hover .stat-icon {
      transform: scale(1.1);
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 0.25rem;
    }

    .stat-label {
      font-size: 0.875rem;
      color: var(--text-secondary);
      font-weight: 500;
    }

    /* Media Grid with Enhanced Cards */
    .media-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .media-card {
      background-color: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-md);
      border: 1px solid var(--border-color);
      transition: var(--transition);
      position: relative;
    }

    .media-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-xl);
    }

    .media-preview {
      position: relative;
      height: 200px;
      overflow: hidden;
      background-color: var(--dark-bg);
      cursor: pointer;
    }

    .media-preview img,
    .media-preview video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: var(--transition);
    }

    .media-card:hover .media-preview img,
    .media-card:hover .media-preview video {
      transform: scale(1.05);
    }

    .file-preview {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.1), rgba(79, 70, 229, 0.1));
      color: var(--primary-color);
      padding: 1rem;
      transition: var(--transition);
    }

    .file-preview:hover {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(79, 70, 229, 0.2));
    }

    .file-icon {
      font-size: 3rem;
      margin-bottom: 0.5rem;
    }

    .file-info {
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
    }

    .file-name-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 0.5rem;
      font-size: 0.875rem;
      font-weight: 500;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .file-ext {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background-color: var(--primary-color);
      color: white;
      font-size: 0.75rem;
      font-weight: 600;
      padding: 0.25rem 0.75rem;
      border-radius: 9999px;
      text-transform: uppercase;
      z-index: 10;
      box-shadow: var(--shadow-md);
    }

    /* Warna untuk berbagai jenis file */
    .ext-pdf { background-color: #ef4444 !important; }
    .ext-doc, .ext-docx { background-color: #2563eb !important; }
    .ext-xls, .ext-xlsx { background-color: #10b981 !important; }
    .ext-ppt, .ext-pptx { background-color: #f59e0b !important; }
    .ext-txt, .ext-md { background-color: #64748b !important; }
    .ext-zip, .ext-rar, .ext-7z { background-color: #8b5cf6 !important; }
    .ext-mp3, .ext-wav, .ext-flac { background-color: #06b6d4 !important; }
    .ext-exe { background-color: #f97316 !important; }
    .ext-html, .ext-htm { background-color: #f59e0b !important; }
    .ext-css { background-color: #3b82f6 !important; }
    .ext-js { background-color: #eab308 !important; }
    .ext-json { background-color: #475569 !important; }
    .ext-xml { background-color: #14b8a6 !important; }
    .ext-sql { background-color: #1e293b !important; }
    .ext-csv { background-color: #10b981 !important; }

    .media-details {
      padding: 1.25rem;
    }

    .media-title {
      font-weight: 600;
      font-size: 1rem;
      color: var(--text-color);
      margin-bottom: 0.75rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .media-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.875rem;
      color: var(--text-secondary);
      margin-bottom: 0.75rem;
    }

    .media-path {
      font-size: 0.75rem;
      color: var(--text-light);
      margin-bottom: 0.75rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .media-actions {
      display: flex;
      gap: 0.5rem;
    }

    .btn-action {
      flex: 1;
      padding: 0.5rem;
      border-radius: calc(var(--radius) / 2);
      border: none;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
    }

    .btn-view {
      background-color: rgba(37, 99, 235, 0.1);
      color: var(--primary-color);
    }

    .btn-view:hover {
      background-color: var(--primary-color);
      color: white;
      transform: translateY(-2px);
    }

    .btn-copy {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--success-color);
    }

    .btn-copy:hover {
      background-color: var(--success-color);
      color: white;
      transform: translateY(-2px);
    }

    /* Pagination Controls - Tambahan untuk items per page */
    .pagination-wrapper {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 2rem 0;
    }

    .items-per-page {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    .items-per-page select {
      border-radius: var(--radius);
      border: 1px solid var(--border-color);
      background-color: var(--card-bg);
      color: var(--text-color);
      padding: 0.5rem 0.75rem;
      font-weight: 500;
      transition: var(--transition);
      box-shadow: var(--shadow-sm);
      font-size: 0.875rem;
    }

    .items-per-page select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      outline: none;
    }

    .pagination-container {
      display: flex;
      justify-content: center;
    }

    .pagination {
      display: flex;
      gap: 0.5rem;
    }

    .page-item {
      list-style: none;
    }

    .page-link {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: calc(var(--radius) / 2);
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      font-weight: 500;
      transition: var(--transition);
      cursor: pointer;
    }

    .page-link:hover {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
      transform: translateY(-2px);
    }

    .page-item.active .page-link {
      background-color: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .page-item.disabled .page-link {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .page-info {
      text-align: center;
      margin-top: 1rem;
      color: var(--text-secondary);
      font-size: 0.875rem;
    }

    /* Modal Styles - Perbaikan untuk responsivitas */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      padding: 1rem;
      overflow: auto;
      backdrop-filter: blur(5px);
    }

    .modal.active {
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .modal-content {
      background-color: var(--card-bg);
      border-radius: var(--radius);
      width: 100%;
      max-width: 90vw;
      max-height: 90vh;
      overflow: hidden;
      box-shadow: var(--shadow-xl);
      display: flex;
      flex-direction: column;
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from { transform: translateY(50px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .modal-header {
      padding: 1rem;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-shrink: 0;
    }

    .modal-title {
      font-weight: 600;
      font-size: 1.25rem;
      color: var(--text-color);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 70%;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-secondary);
      cursor: pointer;
      transition: var(--transition);
      width: 2.5rem;
      height: 2.5rem;
      border-radius: calc(var(--radius) / 2);
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .modal-close:hover {
      background-color: rgba(239, 68, 68, 0.1);
      color: var(--danger-color);
      transform: rotate(90deg);
    }

    .modal-body {
      padding: 1rem;
      overflow-y: auto;
      flex: 1;
      max-height: calc(90vh - 120px);
    }

    .file-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .detail-item {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .detail-label {
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text-secondary);
    }

    .detail-value {
      font-weight: 500;
      color: var(--text-color);
      word-break: break-all;
    }

    .file-preview-container {
      margin-top: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      max-height: calc(90vh - 250px);
      overflow: auto;
      padding: 1rem;
    }

    .file-preview-image {
      max-width: 100%;
      max-height: 100%;
      border-radius: var(--radius);
      box-shadow: var(--shadow-md);
      object-fit: contain;
    }

    .file-preview-text {
      width: 100%;
      max-height: 100%;
      overflow-y: auto;
      background-color: var(--dark-bg);
      color: var(--text-color);
      padding: 1rem;
      border-radius: var(--radius);
      font-family: monospace;
      white-space: pre-wrap;
      font-size: 0.875rem;
    }

    .modal-footer {
      padding: 1rem;
      border-top: 1px solid var(--border-color);
      display: flex;
      justify-content: flex-end;
      flex-shrink: 0;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: calc(var(--radius) / 2);
      border: none;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background-color: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--secondary-color);
      transform: translateY(-2px);
    }

    /* Slider Modal - Ukuran seperti media player standar */
    .slider-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.92);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 2rem;
      backdrop-filter: blur(5px);
    }

    .slider-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease-out;
    }

    .slider-content {
      position: relative;
      width: 900px;
      height: 506px; /* 16:9 aspect ratio */
      max-width: 90vw;
      max-height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #000;
      border-radius: var(--radius);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .slider-image,
    .slider-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .slider-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .slider-close:hover {
      background-color: rgba(239, 68, 68, 0.8);
      transform: rotate(90deg);
    }

    .slider-nav {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .slider-nav:hover {
      background-color: rgba(37, 99, 235, 0.8);
      transform: translateY(-50%) scale(1.1);
    }

    .slider-prev {
      left: 1rem;
    }

    .slider-next {
      right: 1rem;
    }

    /* Enhanced Video Controls */
    .video-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 5;
    }

    .slider-content:hover .video-controls {
      opacity: 1;
    }

    .video-progress-container {
      width: 100%;
      height: 5px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 5px;
      cursor: pointer;
      position: relative;
    }

    .video-progress {
      height: 100%;
      background-color: var(--primary-color);
      border-radius: 5px;
      width: 0%;
      transition: width 0.1s linear;
    }

    .video-progress-buffered {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      background-color: rgba(255, 255, 255, 0.5);
      border-radius: 5px;
      width: 0%;
    }

    .video-controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .video-controls-left,
    .video-controls-right {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .video-btn {
      background: none;
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .video-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .video-time {
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
    }

    .video-volume-container {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .video-volume-slider {
      width: 80px;
      height: 5px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 5px;
      cursor: pointer;
      position: relative;
      display: none;
    }

    .video-volume-container:hover .video-volume-slider {
      display: block;
    }

    .video-volume {
      height: 100%;
      background-color: var(--primary-color);
      border-radius: 5px;
      width: 70%;
    }

    .video-speed {
      background: none;
      border: none;
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      padding: 0.25rem 0.5rem;
      border-radius: calc(var(--radius) / 2);
    }

    .video-speed:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .video-speed-options {
      position: absolute;
      bottom: 3rem;
      right: 1rem;
      background-color: rgba(0, 0, 0, 0.8);
      border-radius: var(--radius);
      padding: 0.5rem;
      display: none;
      flex-direction: column;
      gap: 0.25rem;
      z-index: 10;
    }

    .video-speed-options.active {
      display: flex;
    }

    .video-speed-option {
      background: none;
      border: none;
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      padding: 0.5rem;
      border-radius: calc(var(--radius) / 2);
      text-align: left;
    }

    .video-speed-option:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .video-speed-option.active {
      background-color: var(--primary-color);
    }

    /* Enhanced Image Controls */
    .image-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 5;
    }

    .slider-content:hover .image-controls {
      opacity: 1;
    }

    .image-controls-left,
    .image-controls-right {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .image-btn {
      background: none;
      border: none;
      color: white;
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-btn:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    .image-zoom {
      color: white;
      font-size: 0.875rem;
      font-weight: 500;
    }

    /* Media info overlay */
    .media-info {
      position: absolute;
      top: 1rem;
      left: 1rem;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      opacity: 0;
      transition: opacity 0.3s ease;
      max-width: 80%;
      z-index: 5;
    }

    .slider-content:hover .media-info {
      opacity: 1;
    }

    .media-title-overlay {
      font-size: 1rem;
      font-weight: 500;
      margin-bottom: 0.25rem;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .media-meta-overlay {
      font-size: 0.875rem;
      opacity: 0.8;
    }

    /* Back to Top Button */
    .back-to-top {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background-color: var(--primary-color);
      color: white;
      border: none;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      font-size: 1.25rem;
      cursor: pointer;
      transition: var(--transition);
      box-shadow: var(--shadow-lg);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .back-to-top:hover {
      background-color: var(--secondary-color);
      transform: translateY(-5px);
    }

    .back-to-top.visible {
      display: flex;
    }

    /* Loading Spinner */
    .loading-spinner {
      display: none;
      width: 3rem;
      height: 3rem;
      border: 0.25rem solid rgba(37, 99, 235, 0.2);
      border-top: 0.25rem solid var(--primary-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 2rem auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 3rem 1rem;
      color: var(--text-secondary);
    }

    .empty-state i {
      font-size: 4rem;
      margin-bottom: 1rem;
      color: var(--text-light);
    }

    .empty-state h3 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      color: var(--text-color);
    }

    .empty-state p {
      font-size: 1rem;
      max-width: 500px;
      margin: 0 auto;
    }

    /* Floating Action Button */
    .fab-container {
      position: fixed;
      bottom: 2rem;
      left: 2rem;
      z-index: 1000;
    }

    .fab {
      width: 3.5rem;
      height: 3.5rem;
      border-radius: 50%;
      background-color: var(--primary-color);
      color: white;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
    }

    .fab:hover {
      background-color: var(--secondary-color);
      transform: scale(1.1);
    }

    .fab-menu {
      position: absolute;
      bottom: 4.5rem;
      left: 0;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      opacity: 0;
      visibility: hidden;
      transition: var(--transition);
    }

    .fab-menu.active {
      opacity: 1;
      visibility: visible;
    }

    .fab-option {
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      background-color: var(--card-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
      font-size: 1.2rem;
      cursor: pointer;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fab-option:hover {
      background-color: var(--primary-color);
      color: white;
      transform: scale(1.1);
    }

    /* Slideshow Modal */
    .slideshow-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.92);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      padding: 2rem;
      backdrop-filter: blur(5px);
    }

    .slideshow-modal.active {
      display: flex;
      animation: fadeIn 0.3s ease-out;
    }

    .slideshow-container {
      position: relative;
      width: 900px;
      height: 506px; /* 16:9 aspect ratio */
      max-width: 90vw;
      max-height: 80vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #000;
      border-radius: var(--radius);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .slideshow-slide {
      position: absolute;
      width: 100%;
      height: 100%;
      opacity: 0;
      transition: opacity 1s ease-in-out;
    }

    .slideshow-slide.active {
      opacity: 1;
    }

    .slideshow-image,
    .slideshow-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }

    .slideshow-controls {
      position: absolute;
      bottom: 1rem;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 1rem;
      z-index: 10;
    }

    .slideshow-btn {
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: calc(var(--radius) / 2);
      font-size: 1rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .slideshow-btn:hover {
      background-color: rgba(37, 99, 235, 0.8);
    }

    .slideshow-progress {
      position: absolute;
      bottom: 0;
      left: 0;
      height: 3px;
      background-color: var(--primary-color);
      transition: width 0.1s linear;
    }

    .slideshow-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      font-size: 1.2rem;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
    }

    .slideshow-close:hover {
      background-color: rgba(239, 68, 68, 0.8);
      transform: rotate(90deg);
    }

    /* Responsive Design */
    @media (max-width: 992px) {
      .navbar-controls {
        flex-wrap: wrap;
        justify-content: flex-end;
      }
      
      .form-control, .form-select {
        width: 100px;
        font-size: 0.8rem;
        padding: 0.4rem 0.6rem;
      }
    }

    @media (max-width: 768px) {
      .navbar-container {
        flex-direction: column;
        height: auto;
        padding: 1rem;
      }
      
      .navbar-brand {
        margin-bottom: 1rem;
      }
      
      .navbar-controls {
        width: 100%;
        justify-content: center;
      }
      
      .form-control, .form-select {
        width: 80px;
        font-size: 0.75rem;
        padding: 0.3rem 0.5rem;
      }
      
      body {
        padding-top: 120px;
      }

      .filter-controls {
        grid-template-columns: 1fr;
      }

      .stats-container {
        grid-template-columns: repeat(2, 1fr);
      }

      .media-grid {
        grid-template-columns: 1fr;
      }

      .file-details {
        grid-template-columns: 1fr;
      }
      
      .modal-content {
        max-width: 95vw;
        max-height: 95vh;
      }
      
      .modal-body {
        max-height: calc(95vh - 120px);
      }
      
      .file-preview-container {
        max-height: calc(95vh - 250px);
      }

      /* Responsive untuk media viewer pada mobile */
      .slider-modal {
        padding: 1rem;
      }
      
      .slider-content {
        width: 100%;
        height: auto;
        max-width: calc(100vw - 2rem);
        max-height: calc(100vh - 2rem);
        aspect-ratio: 16/9;
      }
      
      .slider-close {
        top: 0.5rem;
        right: 0.5rem;
        width: 2rem;
        height: 2rem;
        font-size: 1rem;
      }
      
      .slider-prev {
        left: 0.5rem;
        width: 2.5rem;
        height: 2.5rem;
        font-size: 1rem;
      }
      
      .slider-next {
        right: 0.5rem;
        width: 2.5rem;
        height: 2.5rem;
        font-size: 1rem;
      }
      
      /* Responsive untuk video controls pada mobile */
      .video-controls-left,
      .video-controls-right {
        gap: 0.25rem;
      }
      
      .video-btn {
        width: 1.8rem;
        height: 1.8rem;
        font-size: 0.875rem;
      }
      
      .video-time {
        font-size: 0.75rem;
      }
      
      .video-volume-slider {
        width: 60px;
      }
      
      .video-speed {
        font-size: 0.75rem;
        padding: 0.2rem 0.4rem;
      }
      
      /* Responsive untuk image controls pada mobile */
      .image-controls-left,
      .image-controls-right {
        gap: 0.25rem;
      }
      
      .image-btn {
        width: 1.8rem;
        height: 1.8rem;
        font-size: 0.875rem;
      }
      
      .image-zoom {
        font-size: 0.75rem;
      }

      /* Responsive untuk pagination controls */
      .pagination-wrapper {
        flex-direction: column;
        gap: 1rem;
      }
      
      .items-per-page {
        width: 100%;
        justify-content: center;
      }
    }

    @media (max-width: 480px) {
      /* Responsive untuk layar sangat kecil */
      .slider-content {
        max-width: calc(100vw - 1rem);
        max-height: calc(100vh - 1rem);
      }
      
      .slider-close {
        top: 0.5rem;
        right: 0.5rem;
        width: 1.8rem;
        height: 1.8rem;
        font-size: 0.9rem;
      }
      
      .slider-prev {
        left: 0.5rem;
        width: 2rem;
        height: 2rem;
        font-size: 0.9rem;
      }
      
      .slider-next {
        right: 0.5rem;
        width: 2rem;
        height: 2rem;
        font-size: 0.9rem;
      }
      
      /* Responsive untuk video controls pada layar sangat kecil */
      .video-controls-left,
      .video-controls-right {
        gap: 0.2rem;
      }
      
      .video-btn {
        width: 1.5rem;
        height: 1.5rem;
        font-size: 0.75rem;
      }
      
      .video-time {
        font-size: 0.7rem;
      }
      
      .video-volume-slider {
        width: 50px;
      }
      
      .video-speed {
        font-size: 0.7rem;
        padding: 0.15rem 0.3rem;
      }
      
      /* Responsive untuk image controls pada layar sangat kecil */
      .image-controls-left,
      .image-controls-right {
        gap: 0.2rem;
      }
      
      .image-btn {
        width: 1.5rem;
        height: 1.5rem;
        font-size: 0.75rem;
      }
      
      .image-zoom {
        font-size: 0.7rem;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="loading-spinner"></div>
    <div class="loading-text">Memuat Galeri Media...</div>
  </div>

  <!-- Parallax Background -->
  <div class="parallax-bg" id="parallaxBg"></div>

  <!-- Floating Action Button -->
  <div class="fab-container">
    <div class="fab-menu" id="fabMenu">
      <button class="fab-option" id="fabSlideshow" title="Slideshow">
        <i class="fas fa-play"></i>
      </button>
      <button class="fab-option" id="fabShare" title="Bagikan">
        <i class="fas fa-share-alt"></i>
      </button>
      <button class="fab-option" id="fabExport" title="Ekspor">
        <i class="fas fa-download"></i>
      </button>
    </div>
    <button class="fab" id="fabToggle">
      <i class="fas fa-plus"></i>
    </button>
  </div>

  <nav class="navbar">
    <div class="navbar-container">
      <a class="navbar-brand" href="#">
        <i class="fas fa-photo-video"></i>
        Galeri Media Premium
      </a>
      
      <div class="navbar-controls">
        <div class="search-container">
          <input type="text" id="searchInput" class="form-control" placeholder="ðŸ”" />
          <div class="search-suggestions" id="searchSuggestions"></div>
        </div>
        <input type="file" id="folderInput" webkitdirectory multiple class="form-control" />
        <select id="mediaFilter" class="form-select">
          <option value="all">Semua</option>
          <option value="image">Gambar</option>
          <option value="video">Video</option>
          <option value="document">Dokumen</option>
          <option value="audio">Audio</option>
          <option value="archive">Arsip</option>
          <option value="other">Lainnya</option>
        </select>
        <select id="extensionFilter" class="form-select">
          <option value="">Ekstensi</option>
        </select>
        <div class="theme-toggle" id="toggleTheme">
          <div class="theme-toggle-slider">
            <i class="fas fa-sun" id="themeIcon"></i>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <div class="container-fluid">
    <div class="filter-section">
      <div class="filter-title">
        <i class="fas fa-filter"></i>
        Filter Berdasarkan Metadata
      </div>
      
      <div class="filter-controls">
        <div class="filter-group">
          <label for="sizeFilter">Ukuran File</label>
          <select id="sizeFilter" class="form-select">
            <option value="">Semua Ukuran</option>
            <option value="small">Kecil (&lt; 1MB)</option>
            <option value="medium">Sedang (1MB - 10MB)</option>
            <option value="large">Besar (&gt; 10MB)</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="dateFilter">Tanggal</label>
          <select id="dateFilter" class="form-select">
            <option value="">Semua Tanggal</option>
            <option value="today">Hari Ini</option>
            <option value="week">Minggu Ini</option>
            <option value="month">Bulan Ini</option>
            <option value="year">Tahun Ini</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="sortBy">Urutkan</label>
          <select id="sortBy" class="form-select">
            <option value="name">Nama</option>
            <option value="size">Ukuran</option>
            <option value="date">Tanggal</option>
            <option value="type">Tipe</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="sortOrder">Urutan</label>
          <select id="sortOrder" class="form-select">
            <option value="asc">Naik</option>
            <option value="desc">Turun</option>
          </select>
        </div>
      </div>
      
      <button id="clearFilters" class="btn btn-primary mt-3">
        <i class="fas fa-times"></i>
        Hapus Semua Filter
      </button>
    </div>
    
    <div class="stats-container">
      <div class="stat-card">
        <i class="fas fa-files stat-icon"></i>
        <div class="stat-value" id="totalFiles">0</div>
        <div class="stat-label">Total File</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-image stat-icon"></i>
        <div class="stat-value" id="totalImages">0</div>
        <div class="stat-label">Gambar</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-video stat-icon"></i>
        <div class="stat-value" id="totalVideos">0</div>
        <div class="stat-label">Video</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-file stat-icon"></i>
        <div class="stat-value" id="totalDocuments">0</div>
        <div class="stat-label">Dokumen</div>
      </div>
      <div class="stat-card">
        <i class="fas fa-database stat-icon"></i>
        <div class="stat-value" id="totalSize">0 MB</div>
        <div class="stat-label">Total Ukuran</div>
      </div>
    </div>

    <h2 class="section-title">
      <i class="fas fa-folder-open"></i>
      File Anda
    </h2>
    
    <div class="loading-spinner" id="loadingSpinner"></div>
    
    <div id="mediaList" class="media-grid"></div>
    
    <!-- Pagination Controls dengan Items Per Page -->
    <div class="pagination-wrapper">
      <div class="items-per-page">
        <label for="itemsPerPage">Tampilkan:</label>
        <select id="itemsPerPage">
          <option value="10">10</option>
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
          <option value="all">Semua</option>
        </select>
      </div>
      
      <div class="pagination-container">
        <nav aria-label="Navigasi halaman">
          <ul class="pagination" id="paginationControls"></ul>
        </nav>
      </div>
    </div>
    
    <div class="page-info" id="pageInfo"></div>
  </div>
  
  <!-- Modal untuk gambar/video -->
  <div id="sliderModal" class="slider-modal">
    <div class="slider-content">
      <button class="slider-close" id="sliderClose">
        <i class="fas fa-times"></i>
      </button>
      
      <!-- Video Controls -->
      <div class="video-controls" id="videoControls" style="display: none;">
        <div class="video-progress-container" id="videoProgressContainer">
          <div class="video-progress-buffered" id="videoProgressBuffered"></div>
          <div class="video-progress" id="videoProgress"></div>
        </div>
        <div class="video-controls-row">
          <div class="video-controls-left">
            <button class="video-btn" id="videoPlayPause">
              <i class="fas fa-play"></i>
            </button>
            <span class="video-time" id="videoCurrentTime">0:00</span>
            <span>/</span>
            <span class="video-time" id="videoDuration">0:00</span>
          </div>
          <div class="video-controls-right">
            <div class="video-volume-container">
              <button class="video-btn" id="videoVolumeBtn">
                <i class="fas fa-volume-up"></i>
              </button>
              <div class="video-volume-slider">
                <div class="video-volume" id="videoVolume"></div>
              </div>
            </div>
            <button class="video-speed" id="videoSpeedBtn">1x</button>
            <div class="video-speed-options" id="videoSpeedOptions">
              <button class="video-speed-option" data-speed="0.25">0.25x</button>
              <button class="video-speed-option" data-speed="0.5">0.5x</button>
              <button class="video-speed-option" data-speed="0.75">0.75x</button>
              <button class="video-speed-option active" data-speed="1">1x</button>
              <button class="video-speed-option" data-speed="1.25">1.25x</button>
              <button class="video-speed-option" data-speed="1.5">1.5x</button>
              <button class="video-speed-option" data-speed="2">2x</button>
            </div>
            <button class="video-btn" id="videoFullscreen">
              <i class="fas fa-expand"></i>
            </button>
          </div>
        </div>
      </div>
      
      <!-- Image Controls -->
      <div class="image-controls" id="imageControls" style="display: none;">
        <div class="image-controls-left">
          <button class="image-btn" id="imageZoomOut">
            <i class="fas fa-search-minus"></i>
          </button>
          <span class="image-zoom" id="imageZoomLevel">100%</span>
          <button class="image-btn" id="imageZoomIn">
            <i class="fas fa-search-plus"></i>
          </button>
          <button class="image-btn" id="imageReset">
            <i class="fas fa-compress"></i>
          </button>
        </div>
        <div class="image-controls-right">
          <button class="image-btn" id="imageRotateLeft">
            <i class="fas fa-undo"></i>
          </button>
          <button class="image-btn" id="imageRotateRight">
            <i class="fas fa-redo"></i>
          </button>
          <button class="image-btn" id="imageFullscreen">
            <i class="fas fa-expand"></i>
          </button>
        </div>
      </div>
      
      <video id="sliderVideo" style="display:none;"></video>
      <img id="sliderImage" src="" alt="Slider Image" style="display:none;">
      
      <button class="slider-nav slider-prev" id="sliderPrev">
        <i class="fas fa-chevron-left"></i>
      </button>
      <button class="slider-nav slider-next" id="sliderNext">
        <i class="fas fa-chevron-right"></i>
      </button>
      
      <div class="media-info">
        <div class="media-title-overlay" id="mediaTitleOverlay"></div>
        <div class="media-meta-overlay" id="mediaMetaOverlay"></div>
      </div>
    </div>
  </div>
  
  <!-- Modal untuk file non-media -->
  <div id="fileModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Detail File</h3>
        <button class="modal-close" id="fileModalClose">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="file-details">
          <div class="detail-item">
            <div class="detail-label">Nama File</div>
            <div class="detail-value" id="fileModalName"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Ukuran</div>
            <div class="detail-value" id="fileModalSize"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Tipe</div>
            <div class="detail-value" id="fileModalType"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Dimodifikasi</div>
            <div class="detail-value" id="fileModalModified"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Path</div>
            <div class="detail-value" id="fileModalPath"></div>
          </div>
        </div>
        <div class="file-preview-container" id="filePreviewContainer">
          <!-- Preview akan ditambahkan secara dinamis -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="fileDownloadBtn">
          <i class="fas fa-download"></i>
          Unduh File
        </button>
      </div>
    </div>
  </div>

  <!-- Slideshow Modal -->
  <div id="slideshowModal" class="slideshow-modal">
    <div class="slideshow-container">
      <div class="slideshow-progress" id="slideshowProgress"></div>
      <button class="slideshow-close" id="slideshowClose">
        <i class="fas fa-times"></i>
      </button>
      <div id="slideshowSlides"></div>
      <div class="slideshow-controls">
        <button class="slideshow-btn" id="slideshowPlay">
          <i class="fas fa-play"></i>
          Putar
        </button>
        <button class="slideshow-btn" id="slideshowPause">
          <i class="fas fa-pause"></i>
          Jeda
        </button>
        <button class="slideshow-btn" id="slideshowFullscreen">
          <i class="fas fa-expand"></i>
          Layar Penuh
        </button>
      </div>
    </div>
  </div>

  <button class="back-to-top" id="backToTop">
    <i class="fas fa-arrow-up"></i>
  </button>

  <script>
    let currentPage = 1;
    let itemsPerPage = 12; // Default value
    let filteredFiles = [];
    let currentIndex = 0;
    let images = [], videos = [], allFiles = [];
    let uniqueExtensions = new Set();
    let fileMetadata = [];
    let searchSuggestions = [];
    let slideshowInterval;
    let slideshowCurrentIndex = 0;
    let slideshowItems = [];
    let slideshowProgressInterval;
    let slideshowProgress = 0;
    
    // Video control variables
    let videoElement;
    let isVideoPlaying = false;
    let videoCurrentTime = 0;
    let videoDuration = 0;
    let videoVolume = 0.7;
    let videoPlaybackRate = 1;
    let isVideoFullscreen = false;
    
    // Image control variables
    let imageElement;
    let imageZoom = 1;
    let imageRotation = 0;
    let isImageDragging = false;
    let imageDragStartX = 0;
    let imageDragStartY = 0;
    let imageTranslateX = 0;
    let imageTranslateY = 0;

    // Kategori file
    const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp', '.svg', '.ico'];
    const videoExtensions = ['.ts', '.mov', '.mkv', '.mp4', '.webm', '.ogg', '.avi', '.flv', '.wmv'];
    const documentExtensions = ['.pdf', '.doc', '.docx', '.xls', '.xlsx', '.ppt', '.pptx', '.txt', '.md', '.rtf'];
    const audioExtensions = ['.mp3', '.wav', '.flac', '.aac', '.ogg', '.wma', '.m4a'];
    const archiveExtensions = ['.zip', '.rar', '.7z', '.tar', '.gz', '.bz2'];
    const textExtensions = ['.txt', '.md', '.json', '.xml', '.csv', '.html', '.htm', '.css', '.js', '.sql', '.py', '.java', '.c', '.cpp', '.h'];

    // Fungsi untuk menentukan kategori file
    function getFileCategory(file) {
      const ext = '.' + file.name.split('.').pop().toLowerCase();
      
      if (imageExtensions.includes(ext)) return 'image';
      if (videoExtensions.includes(ext)) return 'video';
      if (documentExtensions.includes(ext)) return 'document';
      if (audioExtensions.includes(ext)) return 'audio';
      if (archiveExtensions.includes(ext)) return 'archive';
      
      return 'other';
    }

    // Fungsi untuk menentukan apakah file adalah gambar
    function isImage(file) {
      return getFileCategory(file) === 'image';
    }

    // Fungsi untuk menentukan apakah file adalah video
    function isVideo(file) {
      return getFileCategory(file) === 'video';
    }

    // Fungsi untuk menentukan apakah file adalah dokumen
    function isDocument(file) {
      return getFileCategory(file) === 'document';
    }

    // Fungsi untuk menentukan apakah file adalah audio
    function isAudio(file) {
      return getFileCategory(file) === 'audio';
    }

    // Fungsi untuk menentukan apakah file adalah arsip
    function isArchive(file) {
      return getFileCategory(file) === 'archive';
    }

    // Fungsi untuk menentukan apakah file adalah teks
    function isText(file) {
      const ext = '.' + file.name.split('.').pop().toLowerCase();
      return textExtensions.includes(ext);
    }

    // Fungsi untuk format ukuran file
    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Fungsi untuk mendapatkan ikon file berdasarkan ekstensi
    function getFileIcon(extension) {
      const ext = extension.toLowerCase();
      
      if (imageExtensions.includes('.' + ext)) return 'fa-image';
      if (videoExtensions.includes('.' + ext)) return 'fa-video';
      if (documentExtensions.includes('.' + ext)) {
        if (ext === 'pdf') return 'fa-file-pdf';
        if (['doc', 'docx'].includes(ext)) return 'fa-file-word';
        if (['xls', 'xlsx'].includes(ext)) return 'fa-file-excel';
        if (['ppt', 'pptx'].includes(ext)) return 'fa-file-powerpoint';
        return 'fa-file-alt';
      }
      if (audioExtensions.includes('.' + ext)) return 'fa-file-audio';
      if (archiveExtensions.includes('.' + ext)) return 'fa-file-archive';
      if (textExtensions.includes('.' + ext)) return 'fa-file-code';
      
      return 'fa-file';
    }

    // Fungsi untuk membaca file teks
    function readTextFile(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsText(file);
      });
    }

    // Fungsi untuk membaca file sebagai data URL
    function readFileAsDataURL(file) {
      return new Promise((resolve, reject) => {
        const reader = new FileReader();
        reader.onload = () => resolve(reader.result);
        reader.onerror = reject;
        reader.readAsDataURL(file);
      });
    }

    // Fungsi untuk mendapatkan metadata file
    async function getFileMetadata(file) {
      return new Promise((resolve) => {
        const metadata = {
          name: file.name,
          size: file.size,
          sizeFormatted: formatFileSize(file.size),
          type: file.type || 'Unknown',
          lastModified: new Date(file.lastModified),
          extension: file.name.split('.').pop().toLowerCase(),
          path: file.webkitRelativePath || file.name,
          category: getFileCategory(file),
          isImage: isImage(file),
          isVideo: isVideo(file),
          isDocument: isDocument(file),
          isAudio: isAudio(file),
          isArchive: isArchive(file),
          isText: isText(file)
        };

        // Jika ini adalah gambar, dapatkan dimensinya
        if (metadata.isImage) {
          const img = new Image();
          img.onload = function() {
            metadata.width = this.width;
            metadata.height = this.height;
            metadata.dimensions = `${this.width}x${this.height}`;
            resolve(metadata);
          };
          img.onerror = function() {
            resolve(metadata);
          };
          img.src = URL.createObjectURL(file);
        } 
        // Jika ini adalah video, dapatkan durasinya
        else if (metadata.isVideo) {
          const video = document.createElement('video');
          video.onloadedmetadata = function() {
            metadata.duration = this.duration;
            metadata.width = this.videoWidth;
            metadata.height = this.videoHeight;
            metadata.dimensions = `${this.videoWidth}x${this.videoHeight}`;
            resolve(metadata);
          };
          video.onerror = function() {
            resolve(metadata);
          };
          video.src = URL.createObjectURL(file);
        } 
        else {
          resolve(metadata);
        }
      });
    }

    // Fungsi untuk memproses semua file dan mendapatkan metadata
    async function processFiles(files) {
      document.getElementById('loadingSpinner').style.display = 'block';
      
      const mediaFiles = Array.from(files);
      
      if (mediaFiles.length === 0) {
        alert("ðŸ“‚ Folder tidak berisi file.");
        document.getElementById('loadingSpinner').style.display = 'none';
        return;
      }

      // Reset sets
      uniqueExtensions = new Set();
      
      // Proses semua file untuk mendapatkan metadata
      const metadataPromises = mediaFiles.map(file => getFileMetadata(file));
      fileMetadata = await Promise.all(metadataPromises);
      
      // Simpan file asli untuk digunakan nanti
      allFiles = mediaFiles;
      
      // Kumpulkan semua ekstensi unik dari file
      allFiles.forEach(file => {
        const ext = file.name.split('.').pop().toLowerCase();
        uniqueExtensions.add(ext);
      });
      
      // Update filter ekstensi
      updateExtensionFilter();
      
      // Update statistik
      updateStatistics();
      
      // Filter dan render media
      filterAndRenderMedia();
      
      document.getElementById('loadingSpinner').style.display = 'none';
    }

    document.getElementById("folderInput").addEventListener("change", function(event) {
      const files = event.target.files;
      processFiles(files);
    });

    // Search functionality with suggestions
    document.getElementById("searchInput").addEventListener("input", function(e) {
      const keyword = e.target.value.toLowerCase();
      const suggestionsContainer = document.getElementById("searchSuggestions");
      
      if (keyword.length > 0) {
        // Generate suggestions based on file names
        searchSuggestions = fileMetadata
          .filter(file => file.name.toLowerCase().includes(keyword))
          .slice(0, 5)
          .map(file => file.name);
        
        // Display suggestions
        if (searchSuggestions.length > 0) {
          suggestionsContainer.innerHTML = '';
          searchSuggestions.forEach((suggestion, index) => {
            const suggestionItem = document.createElement('div');
            suggestionItem.className = 'suggestion-item';
            suggestionItem.textContent = suggestion;
            
            // Highlight matching part
            const regex = new RegExp(`(${keyword})`, 'gi');
            suggestionItem.innerHTML = suggestion.replace(regex, '<span class="highlight">$1</span>');
            
            suggestionItem.addEventListener('click', () => {
              document.getElementById('searchInput').value = suggestion;
              suggestionsContainer.classList.remove('active');
              filterAndRenderMedia();
            });
            
            suggestionsContainer.appendChild(suggestionItem);
          });
          suggestionsContainer.classList.add('active');
        } else {
          suggestionsContainer.classList.remove('active');
        }
      } else {
        suggestionsContainer.classList.remove('active');
      }
      
      filterAndRenderMedia();
    });

    // Hide suggestions when clicking outside
    document.addEventListener('click', function(e) {
      if (!e.target.closest('.search-container')) {
        document.getElementById('searchSuggestions').classList.remove('active');
      }
    });

    document.getElementById("mediaFilter").addEventListener("change", () => filterAndRenderMedia());
    document.getElementById("extensionFilter").addEventListener("change", () => filterAndRenderMedia());
    document.getElementById("sizeFilter").addEventListener("change", () => filterAndRenderMedia());
    document.getElementById("dateFilter").addEventListener("change", () => filterAndRenderMedia());
    document.getElementById("sortBy").addEventListener("change", () => filterAndRenderMedia());
    document.getElementById("sortOrder").addEventListener("change", () => filterAndRenderMedia());
    
    // Event listener untuk items per page
    document.getElementById("itemsPerPage").addEventListener("change", function() {
      const value = this.value;
      if (value === 'all') {
        itemsPerPage = filteredFiles.length;
      } else {
        itemsPerPage = parseInt(value);
      }
      currentPage = 1; // Reset ke halaman pertama
      filterAndRenderMedia();
    });
    
    document.getElementById("clearFilters").addEventListener("click", function() {
      document.getElementById("searchInput").value = "";
      document.getElementById("mediaFilter").value = "all";
      document.getElementById("extensionFilter").value = "";
      document.getElementById("sizeFilter").value = "";
      document.getElementById("dateFilter").value = "";
      document.getElementById("sortBy").value = "name";
      document.getElementById("sortOrder").value = "asc";
      
      filterAndRenderMedia();
    });

    function updateExtensionFilter() {
      const extensionFilter = document.getElementById("extensionFilter");
      // Simpan nilai yang dipilih sekarang
      const currentValue = extensionFilter.value;
      
      // Kosongkan dropdown kecuali opsi default
      extensionFilter.innerHTML = '<option value="">Ekstensi</option>';
      
      // Urutkan ekstensi secara alfabetis
      const sortedExtensions = Array.from(uniqueExtensions).sort();
      
      // Tambahkan setiap ekstensi ke dropdown
      sortedExtensions.forEach(ext => {
        const option = document.createElement("option");
        option.value = ext;
        option.textContent = ext.toUpperCase();
        extensionFilter.appendChild(option);
      });
      
      // Kembalikan nilai yang dipilih sebelumnya jika masih ada
      if (sortedExtensions.includes(currentValue)) {
        extensionFilter.value = currentValue;
      }
    }

    function updateStatistics() {
      const totalFiles = fileMetadata.length;
      const totalImages = fileMetadata.filter(f => f.isImage).length;
      const totalVideos = fileMetadata.filter(f => f.isVideo).length;
      const totalDocuments = fileMetadata.filter(f => f.isDocument).length;
      const totalSize = fileMetadata.reduce((sum, f) => sum + f.size, 0);
      
      document.getElementById('totalFiles').textContent = totalFiles;
      document.getElementById('totalImages').textContent = totalImages;
      document.getElementById('totalVideos').textContent = totalVideos;
      document.getElementById('totalDocuments').textContent = totalDocuments;
      document.getElementById('totalSize').textContent = formatFileSize(totalSize);
    }

    function filterAndRenderMedia() {
      const keyword = document.getElementById("searchInput").value.toLowerCase();
      const filter = document.getElementById("mediaFilter").value;
      const extensionFilter = document.getElementById("extensionFilter").value;
      const sizeFilter = document.getElementById("sizeFilter").value;
      const dateFilter = document.getElementById("dateFilter").value;
      const sortBy = document.getElementById("sortBy").value;
      const sortOrder = document.getElementById("sortOrder").value;

      images = [];
      videos = [];

      filteredFiles = fileMetadata.filter((metadata, index) => {
        const file = allFiles[index];
        
        // Filter berdasarkan nama file
        const nameMatch = metadata.name.toLowerCase().includes(keyword);
        
        // Filter berdasarkan kategori
        const categoryMatch = filter === "all" || metadata.category === filter;
        
        // Filter berdasarkan ekstensi
        const extensionMatch = !extensionFilter || metadata.extension === extensionFilter;
        
        // Filter berdasarkan ukuran
        let sizeMatch = true;
        if (sizeFilter) {
          switch (sizeFilter) {
            case "small":
              sizeMatch = metadata.size < 1024 * 1024; // Kurang dari 1MB
              break;
            case "medium":
              sizeMatch = metadata.size >= 1024 * 1024 && metadata.size <= 10 * 1024 * 1024; // 1MB - 10MB
              break;
            case "large":
              sizeMatch = metadata.size > 10 * 1024 * 1024; // Lebih dari 10MB
              break;
          }
        }
        
        // Filter berdasarkan tanggal
        let dateMatch = true;
        if (dateFilter) {
          const fileDate = new Date(metadata.lastModified);
          const today = new Date();
          
          switch (dateFilter) {
            case "today":
              dateMatch = fileDate.toDateString() === today.toDateString();
              break;
            case "week":
              const weekAgo = new Date(today);
              weekAgo.setDate(today.getDate() - 7);
              dateMatch = fileDate >= weekAgo;
              break;
            case "month":
              dateMatch = fileDate.getMonth() === today.getMonth() && 
                         fileDate.getFullYear() === today.getFullYear();
              break;
            case "year":
              dateMatch = fileDate.getFullYear() === today.getFullYear();
              break;
          }
        }
        
        return nameMatch && categoryMatch && extensionMatch && sizeMatch && dateMatch;
      });

      // Sortir hasil
      filteredFiles.sort((a, b) => {
        let aValue, bValue;
        
        switch (sortBy) {
          case "name":
            aValue = a.name.toLowerCase();
            bValue = b.name.toLowerCase();
            break;
          case "size":
            aValue = a.size;
            bValue = b.size;
            break;
          case "date":
            aValue = a.lastModified;
            bValue = b.lastModified;
            break;
          case "type":
            aValue = a.extension;
            bValue = b.extension;
            break;
          default:
            aValue = a.name.toLowerCase();
            bValue = b.name.toLowerCase();
        }
        
        if (sortOrder === "asc") {
          return aValue > bValue ? 1 : -1;
        } else {
          return aValue < bValue ? 1 : -1;
        }
      });

      renderPage(currentPage = 1);
      renderPagination();
    }

    function renderPage(page) {
      currentPage = page;
      const mediaContainer = document.getElementById("mediaList");
      mediaContainer.innerHTML = "";

      if (filteredFiles.length === 0) {
        const emptyState = document.createElement("div");
        emptyState.className = "empty-state";
        emptyState.innerHTML = `
          <i class="fas fa-folder-open"></i>
          <h3>Tidak ada file yang ditemukan</h3>
          <p>Coba ubah filter atau pilih folder lain.</p>
        `;
        mediaContainer.appendChild(emptyState);
        return;
      }

      const start = (page - 1) * itemsPerPage;
      const end = start + itemsPerPage;
      const pageItems = filteredFiles.slice(start, end);

      pageItems.forEach((metadata, index) => {
        const fileIndex = fileMetadata.indexOf(metadata);
        const file = allFiles[fileIndex];
        
        const card = document.createElement("div");
        card.className = "media-card";

        const ext = metadata.extension;
        const badge = document.createElement("div");
        badge.className = "file-ext ext-" + ext;
        badge.textContent = ext;
        card.appendChild(badge);

        if (metadata.isImage) {
          const preview = document.createElement("div");
          preview.className = "media-preview";
          
          const img = document.createElement("img");
          img.src = URL.createObjectURL(file);
          img.loading = "lazy";
          images.push(img.src);
          img.addEventListener("click", () => openSliderImage(images.indexOf(img.src)));
          preview.appendChild(img);
          
          card.appendChild(preview);
        } else if (metadata.isVideo) {
          const preview = document.createElement("div");
          preview.className = "media-preview";
          
          const vid = document.createElement("video");
          vid.src = URL.createObjectURL(file);
          videos.push(vid.src);
          vid.addEventListener("click", () => openSliderVideo(videos.indexOf(vid.src)));
          preview.appendChild(vid);
          
          card.appendChild(preview);
        } else {
          // Untuk file non-media, tampilkan preview
          const preview = document.createElement("div");
          preview.className = "file-preview";
          
          const icon = document.createElement("i");
          icon.className = "fas " + getFileIcon(ext) + " file-icon";
          preview.appendChild(icon);
          
          // Tambahkan informasi file
          const fileInfo = document.createElement("div");
          fileInfo.className = "file-info";
          fileInfo.textContent = metadata.sizeFormatted;
          preview.appendChild(fileInfo);
          
          // Tambahkan overlay nama file
          const nameOverlay = document.createElement("div");
          nameOverlay.className = "file-name-overlay";
          nameOverlay.textContent = metadata.name;
          preview.appendChild(nameOverlay);
          
          // Tambahkan event listener untuk membuka modal saat diklik
          preview.addEventListener("click", () => openFileModal(file, metadata));
          
          card.appendChild(preview);
        }

        const details = document.createElement("div");
        details.className = "media-details";

        const name = document.createElement("div");
        name.className = "media-title";
        name.textContent = metadata.name;

        const meta = document.createElement("div");
        meta.className = "media-meta";
        meta.innerHTML = `
          <span>${metadata.sizeFormatted}</span>
          <span>${new Date(metadata.lastModified).toLocaleDateString()}</span>
        `;

        const path = document.createElement("div");
        path.className = "media-path";
        path.textContent = metadata.path;

        const actions = document.createElement("div");
        actions.className = "media-actions";
        
        const viewBtn = document.createElement("button");
        viewBtn.className = "btn-action btn-view";
        viewBtn.innerHTML = `<i class="fas fa-eye"></i> Lihat`;
        viewBtn.addEventListener("click", () => {
          if (metadata.isImage) {
            openSliderImage(images.indexOf(URL.createObjectURL(file)));
          } else if (metadata.isVideo) {
            openSliderVideo(videos.indexOf(URL.createObjectURL(file)));
          } else {
            openFileModal(file, metadata);
          }
        });
        
        const copyBtn = document.createElement("button");
        copyBtn.className = "btn-action btn-copy";
        copyBtn.innerHTML = `<i class="fas fa-copy"></i> Salin`;
        copyBtn.addEventListener("click", () => {
          navigator.clipboard.writeText(metadata.path).then(() => {
            copyBtn.innerHTML = `<i class="fas fa-check"></i> Tersalin`;
            setTimeout(() => {
              copyBtn.innerHTML = `<i class="fas fa-copy"></i> Salin`;
            }, 1500);
          });
        });
        
        actions.appendChild(viewBtn);
        actions.appendChild(copyBtn);

        details.appendChild(name);
        details.appendChild(meta);
        details.appendChild(path);
        details.appendChild(actions);
        
        card.appendChild(details);
        mediaContainer.appendChild(card);
      });
    }

    function renderPagination() {
      const pagination = document.getElementById("paginationControls");
      pagination.innerHTML = "";

      // Hitung total halaman
      let totalPages;
      if (itemsPerPage >= filteredFiles.length) {
        totalPages = 1;
      } else {
        totalPages = Math.ceil(filteredFiles.length / itemsPerPage);
      }
      
      if (totalPages <= 1) {
        document.getElementById("pageInfo").textContent = `Menampilkan ${filteredFiles.length} file`;
        return;
      }

      const prevLi = document.createElement("li");
      prevLi.className = `page-item ${currentPage === 1 ? "disabled" : ""}`;
      const prevBtn = document.createElement("button");
      prevBtn.className = "page-link";
      prevBtn.innerHTML = `<i class="fas fa-chevron-left"></i>`;
      prevBtn.onclick = () => {
        if (currentPage > 1) {
          renderPage(currentPage - 1);
          renderPagination();
        }
      };
      prevLi.appendChild(prevBtn);
      pagination.appendChild(prevLi);

      const maxButtons = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxButtons / 2));
      let endPage = startPage + maxButtons - 1;

      if (endPage > totalPages) {
        endPage = totalPages;
        startPage = Math.max(1, endPage - maxButtons + 1);
      }

      for (let i = startPage; i <= endPage; i++) {
        const li = document.createElement("li");
        li.className = `page-item ${i === currentPage ? "active" : ""}`;
        const btn = document.createElement("button");
        btn.className = "page-link";
        btn.textContent = i;
        btn.onclick = () => {
          renderPage(i);
          renderPagination();
        };
        li.appendChild(btn);
        pagination.appendChild(li);
      }

      const nextLi = document.createElement("li");
      nextLi.className = `page-item ${currentPage === totalPages ? "disabled" : ""}`;
      const nextBtn = document.createElement("button");
      nextBtn.className = "page-link";
      nextBtn.innerHTML = `<i class="fas fa-chevron-right"></i>`;
      nextBtn.onclick = () => {
        if (currentPage < totalPages) {
          renderPage(currentPage + 1);
          renderPagination();
        }
      };
      nextLi.appendChild(nextBtn);
      pagination.appendChild(nextBtn);

      // Update info halaman
      const start = (currentPage - 1) * itemsPerPage + 1;
      const end = Math.min(currentPage * itemsPerPage, filteredFiles.length);
      document.getElementById("pageInfo").textContent = `Menampilkan ${start}-${end} dari ${filteredFiles.length} file`;
    }

    function openSliderImage(index) {
      currentIndex = index;
      const metadata = filteredFiles[images.length > 0 ? index : 0];
      
      // Update media info
      document.getElementById("mediaTitleOverlay").textContent = metadata.name;
      document.getElementById("mediaMetaOverlay").textContent = `${metadata.sizeFormatted} â€¢ ${metadata.dimensions || ''}`;
      
      // Show image controls and hide video controls
      document.getElementById("imageControls").style.display = "flex";
      document.getElementById("videoControls").style.display = "none";
      
      document.getElementById("sliderModal").classList.add("active");
      
      // Set image element
      imageElement = document.getElementById("sliderImage");
      imageElement.src = images[currentIndex];
      imageElement.style.display = "block";
      imageElement.style.transform = `scale(${imageZoom}) rotate(${imageRotation}deg) translate(${imageTranslateX}px, ${imageTranslateY}px)`;
      
      document.getElementById("sliderVideo").style.display = "none";
      
      // Reset image controls
      resetImageControls();
    }

    function openSliderVideo(index) {
      currentIndex = index;
      const metadata = filteredFiles[videos.length > 0 ? index : 0];
      
      // Update media info
      document.getElementById("mediaTitleOverlay").textContent = metadata.name;
      document.getElementById("mediaMetaOverlay").textContent = `${metadata.sizeFormatted} â€¢ ${metadata.dimensions || ''}`;
      
      // Show video controls and hide image controls
      document.getElementById("videoControls").style.display = "flex";
      document.getElementById("imageControls").style.display = "none";
      
      document.getElementById("sliderModal").classList.add("active");
      
      // Set video element
      videoElement = document.getElementById("sliderVideo");
      videoElement.src = videos[currentIndex];
      videoElement.style.display = "block";
      
      // Reset video controls
      resetVideoControls();
      
      // Setup video event listeners
      setupVideoEventListeners();
      
      document.getElementById("sliderImage").style.display = "none";
    }

    function resetVideoControls() {
      // Reset video state
      isVideoPlaying = false;
      videoCurrentTime = 0;
      videoDuration = 0;
      videoVolume = 0.7;
      videoPlaybackRate = 1;
      isVideoFullscreen = false;
      
      // Update UI
      document.getElementById("videoPlayPause").innerHTML = '<i class="fas fa-play"></i>';
      document.getElementById("videoCurrentTime").textContent = "0:00";
      document.getElementById("videoDuration").textContent = "0:00";
      document.getElementById("videoVolume").style.width = "70%";
      document.getElementById("videoSpeedBtn").textContent = "1x";
      
      // Reset speed options
      document.querySelectorAll(".video-speed-option").forEach(option => {
        option.classList.remove("active");
        if (option.dataset.speed === "1") {
          option.classList.add("active");
        }
      });
    }

    function setupVideoEventListeners() {
      // Play/Pause button
      document.getElementById("videoPlayPause").addEventListener("click", toggleVideoPlayPause);
      
      // Progress bar
      document.getElementById("videoProgressContainer").addEventListener("click", seekVideo);
      
      // Volume controls
      document.getElementById("videoVolumeBtn").addEventListener("click", toggleVideoMute);
      document.getElementById("videoVolume").addEventListener("click", changeVideoVolume);
      
      // Speed controls
      document.getElementById("videoSpeedBtn").addEventListener("click", toggleVideoSpeedOptions);
      document.querySelectorAll(".video-speed-option").forEach(option => {
        option.addEventListener("click", changeVideoSpeed);
      });
      
      // Fullscreen
      document.getElementById("videoFullscreen").addEventListener("click", toggleVideoFullscreen);
      
      // Video events
      videoElement.addEventListener("timeupdate", updateVideoProgress);
      videoElement.addEventListener("loadedmetadata", updateVideoDuration);
      videoElement.addEventListener("progress", updateVideoBuffered);
      videoElement.addEventListener("ended", onVideoEnded);
      videoElement.addEventListener("volumechange", updateVolumeUI);
      videoElement.addEventListener("play", () => {
        isVideoPlaying = true;
        document.getElementById("videoPlayPause").innerHTML = '<i class="fas fa-pause"></i>';
      });
      videoElement.addEventListener("pause", () => {
        isVideoPlaying = false;
        document.getElementById("videoPlayPause").innerHTML = '<i class="fas fa-play"></i>';
      });
      
      // Set initial volume
      videoElement.volume = videoVolume;
    }

    function toggleVideoPlayPause() {
      if (isVideoPlaying) {
        videoElement.pause();
      } else {
        videoElement.play();
      }
    }

    function seekVideo(e) {
      const progressBar = document.getElementById("videoProgressContainer");
      const clickPosition = (e.clientX - progressBar.getBoundingClientRect().left) / progressBar.offsetWidth;
      videoElement.currentTime = clickPosition * videoDuration;
    }

    function updateVideoProgress() {
      videoCurrentTime = videoElement.currentTime;
      const progressPercent = (videoCurrentTime / videoDuration) * 100;
      document.getElementById("videoProgress").style.width = `${progressPercent}%`;
      document.getElementById("videoCurrentTime").textContent = formatTime(videoCurrentTime);
    }

    function updateVideoDuration() {
      videoDuration = videoElement.duration;
      document.getElementById("videoDuration").textContent = formatTime(videoDuration);
    }

    function updateVideoBuffered() {
      if (videoElement.buffered.length > 0) {
        const bufferedEnd = videoElement.buffered.end(videoElement.buffered.length - 1);
        const bufferedPercent = (bufferedEnd / videoDuration) * 100;
        document.getElementById("videoProgressBuffered").style.width = `${bufferedPercent}%`;
      }
    }

    function onVideoEnded() {
      isVideoPlaying = false;
      document.getElementById("videoPlayPause").innerHTML = '<i class="fas fa-play"></i>';
      
      // Auto-play next video if available
      if (currentIndex < videos.length - 1) {
        setTimeout(() => {
          document.getElementById("sliderNext").click();
        }, 1000);
      }
    }

    function toggleVideoMute() {
      videoElement.muted = !videoElement.muted;
      const volumeBtn = document.getElementById("videoVolumeBtn");
      
      if (videoElement.muted) {
        volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
      } else {
        volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
      }
    }

    function changeVideoVolume(e) {
      const volumeSlider = document.getElementById("videoVolume");
      const clickPosition = (e.clientX - volumeSlider.getBoundingClientRect().left) / volumeSlider.offsetWidth;
      videoVolume = Math.max(0, Math.min(1, clickPosition));
      videoElement.volume = videoVolume;
      volumeSlider.style.width = `${videoVolume * 100}%`;
    }

    function updateVolumeUI() {
      const volumeBtn = document.getElementById("videoVolumeBtn");
      const volumeSlider = document.getElementById("videoVolume");
      
      if (videoElement.muted || videoElement.volume === 0) {
        volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
      } else if (videoElement.volume < 0.5) {
        volumeBtn.innerHTML = '<i class="fas fa-volume-down"></i>';
      } else {
        volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
      }
      
      volumeSlider.style.width = `${videoElement.volume * 100}%`;
    }

    function toggleVideoSpeedOptions() {
      document.getElementById("videoSpeedOptions").classList.toggle("active");
    }

    function changeVideoSpeed(e) {
      const speed = parseFloat(e.target.dataset.speed);
      videoPlaybackRate = speed;
      videoElement.playbackRate = speed;
      document.getElementById("videoSpeedBtn").textContent = `${speed}x`;
      
      // Update active state
      document.querySelectorAll(".video-speed-option").forEach(option => {
        option.classList.remove("active");
      });
      e.target.classList.add("active");
      
      // Close speed options
      document.getElementById("videoSpeedOptions").classList.remove("active");
    }

    function toggleVideoFullscreen() {
      if (!isVideoFullscreen) {
        if (videoElement.requestFullscreen) {
          videoElement.requestFullscreen();
        } else if (videoElement.webkitRequestFullscreen) {
          videoElement.webkitRequestFullscreen();
        } else if (videoElement.msRequestFullscreen) {
          videoElement.msRequestFullscreen();
        }
        isVideoFullscreen = true;
        document.getElementById("videoFullscreen").innerHTML = '<i class="fas fa-compress"></i>';
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
          document.msExitFullscreen();
        }
        isVideoFullscreen = false;
        document.getElementById("videoFullscreen").innerHTML = '<i class="fas fa-expand"></i>';
      }
    }

    function formatTime(seconds) {
      const minutes = Math.floor(seconds / 60);
      seconds = Math.floor(seconds % 60);
      return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }

    function resetImageControls() {
      // Reset image state
      imageZoom = 1;
      imageRotation = 0;
      imageTranslateX = 0;
      imageTranslateY = 0;
      isImageDragging = false;
      
      // Update UI
      document.getElementById("imageZoomLevel").textContent = "100%";
      
      // Setup image event listeners
      setupImageEventListeners();
    }

    function setupImageEventListeners() {
      // Zoom controls
      document.getElementById("imageZoomIn").addEventListener("click", zoomImageIn);
      document.getElementById("imageZoomOut").addEventListener("click", zoomImageOut);
      document.getElementById("imageReset").addEventListener("click", resetImageTransform);
      
      // Rotation controls
      document.getElementById("imageRotateLeft").addEventListener("click", rotateImageLeft);
      document.getElementById("imageRotateRight").addEventListener("click", rotateImageRight);
      
      // Fullscreen
      document.getElementById("imageFullscreen").addEventListener("click", toggleImageFullscreen);
      
      // Drag controls
      imageElement.addEventListener("mousedown", startImageDrag);
      imageElement.addEventListener("mousemove", dragImage);
      imageElement.addEventListener("mouseup", endImageDrag);
      imageElement.addEventListener("mouseleave", endImageDrag);
      
      // Touch controls for mobile
      imageElement.addEventListener("touchstart", startImageDrag);
      imageElement.addEventListener("touchmove", dragImage);
      imageElement.addEventListener("touchend", endImageDrag);
      
      // Mouse wheel zoom
      imageElement.addEventListener("wheel", handleImageWheel);
    }

    function zoomImageIn() {
      imageZoom = Math.min(imageZoom + 0.1, 3);
      updateImageTransform();
    }

    function zoomImageOut() {
      imageZoom = Math.max(imageZoom - 0.1, 0.5);
      updateImageTransform();
    }

    function resetImageTransform() {
      imageZoom = 1;
      imageRotation = 0;
      imageTranslateX = 0;
      imageTranslateY = 0;
      updateImageTransform();
    }

    function rotateImageLeft() {
      imageRotation -= 90;
      updateImageTransform();
    }

    function rotateImageRight() {
      imageRotation += 90;
      updateImageTransform();
    }

    function updateImageTransform() {
      imageElement.style.transform = `scale(${imageZoom}) rotate(${imageRotation}deg) translate(${imageTranslateX}px, ${imageTranslateY}px)`;
      document.getElementById("imageZoomLevel").textContent = `${Math.round(imageZoom * 100)}%`;
    }

    function startImageDrag(e) {
      isImageDragging = true;
      
      if (e.type === "touchstart") {
        imageDragStartX = e.touches[0].clientX - imageTranslateX;
        imageDragStartY = e.touches[0].clientY - imageTranslateY;
      } else {
        imageDragStartX = e.clientX - imageTranslateX;
        imageDragStartY = e.clientY - imageTranslateY;
      }
      
      imageElement.style.cursor = "grabbing";
    }

    function dragImage(e) {
      if (!isImageDragging) return;
      
      e.preventDefault();
      
      if (e.type === "touchmove") {
        imageTranslateX = e.touches[0].clientX - imageDragStartX;
        imageTranslateY = e.touches[0].clientY - imageDragStartY;
      } else {
        imageTranslateX = e.clientX - imageDragStartX;
        imageTranslateY = e.clientY - imageDragStartY;
      }
      
      updateImageTransform();
    }

    function endImageDrag() {
      isImageDragging = false;
      imageElement.style.cursor = "grab";
    }

    function handleImageWheel(e) {
      e.preventDefault();
      
      if (e.deltaY < 0) {
        zoomImageIn();
      } else {
        zoomImageOut();
      }
    }

    function toggleImageFullscreen() {
      if (!document.fullscreenElement) {
        imageElement.requestFullscreen().catch(err => {
          console.error(`Error attempting to enable fullscreen: ${err.message}`);
        });
        document.getElementById("imageFullscreen").innerHTML = '<i class="fas fa-compress"></i>';
      } else {
        document.exitFullscreen();
        document.getElementById("imageFullscreen").innerHTML = '<i class="fas fa-expand"></i>';
      }
    }

    // Fungsi untuk membuka modal file non-media
    async function openFileModal(file, metadata) {
      // Set informasi file
      document.getElementById("fileModalName").textContent = metadata.name;
      document.getElementById("fileModalSize").textContent = metadata.sizeFormatted;
      document.getElementById("fileModalType").textContent = metadata.type;
      document.getElementById("fileModalModified").textContent = new Date(metadata.lastModified).toLocaleString();
      document.getElementById("fileModalPath").textContent = metadata.path;
      
      // Set tombol unduh
      const downloadBtn = document.getElementById("fileDownloadBtn");
      downloadBtn.onclick = () => {
        const url = URL.createObjectURL(file);
        const a = document.createElement('a');
        a.href = url;
        a.download = file.name;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
      };
      
      // Kosongkan container preview
      const previewContainer = document.getElementById("filePreviewContainer");
      previewContainer.innerHTML = '';
      
      // Tampilkan preview berdasarkan jenis file
      if (metadata.isImage) {
        // Untuk gambar, tampilkan preview gambar
        const img = document.createElement('img');
        img.className = 'file-preview-image';
        img.src = URL.createObjectURL(file);
        previewContainer.appendChild(img);
      } else if (metadata.isText) {
        // Untuk file teks, baca dan tampilkan kontennya
        try {
          const text = await readTextFile(file);
          const textContainer = document.createElement('div');
          textContainer.className = 'file-preview-text';
          textContainer.textContent = text;
          previewContainer.appendChild(textContainer);
        } catch (error) {
          const errorDiv = document.createElement('div');
          errorDiv.textContent = 'Tidak dapat membaca file: ' + error.message;
          previewContainer.appendChild(errorDiv);
        }
      } else {
        // Untuk file lain, tampilkan informasi bahwa preview tidak tersedia
        const noPreview = document.createElement('div');
        noPreview.textContent = 'Preview tidak tersedia untuk jenis file ini. Silakan unduh file untuk melihat kontennya.';
        previewContainer.appendChild(noPreview);
      }
      
      // Tampilkan modal
      document.getElementById("fileModal").classList.add("active");
    }

    document.getElementById("sliderClose").addEventListener("click", () => {
      document.getElementById("sliderModal").classList.remove("active");
      
      // Pause video if playing
      if (videoElement && !videoElement.paused) {
        videoElement.pause();
      }
      
      // Reset video src
      if (videoElement) {
        videoElement.src = "";
      }
      
      // Reset image src
      if (imageElement) {
        imageElement.src = "";
      }
    });

    document.getElementById("fileModalClose").addEventListener("click", () => {
      document.getElementById("fileModal").classList.remove("active");
    });

    document.getElementById("sliderPrev").addEventListener("click", () => {
      if (document.getElementById("sliderImage").style.display === "block") {
        currentIndex = (currentIndex - 1 + images.length) % images.length;
        openSliderImage(currentIndex);
      } else {
        currentIndex = (currentIndex - 1 + videos.length) % videos.length;
        openSliderVideo(currentIndex);
      }
    });

    document.getElementById("sliderNext").addEventListener("click", () => {
      if (document.getElementById("sliderImage").style.display === "block") {
        currentIndex = (currentIndex + 1) % images.length;
        openSliderImage(currentIndex);
      } else {
        currentIndex = (currentIndex + 1) % videos.length;
        openSliderVideo(currentIndex);
      }
    });

    window.onscroll = () => {
      const backToTop = document.getElementById("backToTop");
      if (window.scrollY > 200) {
        backToTop.classList.add("visible");
      } else {
        backToTop.classList.remove("visible");
      }
      
      // Parallax effect
      const parallaxBg = document.getElementById("parallaxBg");
      parallaxBg.style.transform = `translateY(${window.scrollY * 0.5}px)`;
    };

    document.getElementById("backToTop").addEventListener("click", () => {
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    document.addEventListener("keydown", function (e) {
      const sliderModal = document.getElementById("sliderModal");
      const fileModal = document.getElementById("fileModal");
      
      if (sliderModal.classList.contains("active")) {
        if (e.key === "ArrowRight") document.getElementById("sliderNext").click();
        else if (e.key === "ArrowLeft") document.getElementById("sliderPrev").click();
        else if (e.key === "Escape") document.getElementById("sliderClose").click();
        else if (e.key === " " && videoElement) {
          e.preventDefault();
          toggleVideoPlayPause();
        }
      } else if (fileModal.classList.contains("active")) {
        if (e.key === "Escape") document.getElementById("fileModalClose").click();
      }
    });

    document.getElementById("toggleTheme").addEventListener("click", () => {
      document.body.classList.toggle("dark");
      const isDark = document.body.classList.contains("dark");
      const themeIcon = document.getElementById("themeIcon");
      
      if (isDark) {
        themeIcon.className = "fas fa-moon";
      } else {
        themeIcon.className = "fas fa-sun";
      }
    });

    // Menutup modal saat klik di luar konten
    document.getElementById("sliderModal").addEventListener("click", function (e) {
      if (e.target === this) {
        document.getElementById("sliderClose").click();
      }
    });

    document.getElementById("fileModal").addEventListener("click", function (e) {
      if (e.target === this) {
        document.getElementById("fileModalClose").click();
      }
    });

    // FAB (Floating Action Button) functionality
    document.getElementById("fabToggle").addEventListener("click", function() {
      const fabMenu = document.getElementById("fabMenu");
      fabMenu.classList.toggle("active");
      
      // Rotate the plus icon
      this.querySelector("i").classList.toggle("fa-plus");
      this.querySelector("i").classList.toggle("fa-times");
    });

    // Slideshow functionality
    document.getElementById("fabSlideshow").addEventListener("click", function() {
      // Close FAB menu
      document.getElementById("fabMenu").classList.remove("active");
      document.getElementById("fabToggle").querySelector("i").classList.add("fa-plus");
      document.getElementById("fabToggle").querySelector("i").classList.remove("fa-times");
      
      // Prepare slideshow items
      slideshowItems = [];
      
      // Add images to slideshow
      filteredFiles.forEach((metadata, index) => {
        if (metadata.isImage) {
          const fileIndex = fileMetadata.indexOf(metadata);
          const file = allFiles[fileIndex];
          slideshowItems.push({
            type: 'image',
            src: URL.createObjectURL(file),
            metadata: metadata
          });
        }
      });
      
      if (slideshowItems.length === 0) {
        alert("Tidak ada gambar untuk slideshow.");
        return;
      }
      
      // Open slideshow modal
      openSlideshow();
    });

    function openSlideshow() {
      const slideshowModal = document.getElementById("slideshowModal");
      const slideshowSlides = document.getElementById("slideshowSlides");
      
      // Clear previous slides
      slideshowSlides.innerHTML = '';
      
      // Create slides
      slideshowItems.forEach((item, index) => {
        const slide = document.createElement("div");
        slide.className = `slideshow-slide ${index === 0 ? 'active' : ''}`;
        
        if (item.type === 'image') {
          const img = document.createElement("img");
          img.className = "slideshow-image";
          img.src = item.src;
          slide.appendChild(img);
        }
        
        slideshowSlides.appendChild(slide);
      });
      
      // Reset slideshow state
      slideshowCurrentIndex = 0;
      slideshowProgress = 0;
      
      // Show modal
      slideshowModal.classList.add("active");
      
      // Start slideshow
      startSlideshow();
    }

    function startSlideshow() {
      // Clear any existing interval
      if (slideshowInterval) {
        clearInterval(slideshowInterval);
      }
      
      if (slideshowProgressInterval) {
        clearInterval(slideshowProgressInterval);
      }
      
      // Set progress bar to 0
      document.getElementById("slideshowProgress").style.width = "0%";
      slideshowProgress = 0;
      
      // Start progress bar animation
      slideshowProgressInterval = setInterval(() => {
        slideshowProgress += 1;
        document.getElementById("slideshowProgress").style.width = `${slideshowProgress}%`;
        
        if (slideshowProgress >= 100) {
          clearInterval(slideshowProgressInterval);
        }
      }, 50); // 5 seconds total (5000ms / 50ms = 100 steps)
      
      // Set interval for changing slides
      slideshowInterval = setInterval(() => {
        nextSlide();
      }, 5000); // Change slide every 5 seconds
    }

    function nextSlide() {
      const slides = document.querySelectorAll(".slideshow-slide");
      
      // Hide current slide
      slides[slideshowCurrentIndex].classList.remove("active");
      
      // Move to next slide
      slideshowCurrentIndex = (slideshowCurrentIndex + 1) % slides.length;
      
      // Show next slide
      slides[slideshowCurrentIndex].classList.add("active");
      
      // Restart progress bar
      if (slideshowProgressInterval) {
        clearInterval(slideshowProgressInterval);
      }
      
      document.getElementById("slideshowProgress").style.width = "0%";
      slideshowProgress = 0;
      
      slideshowProgressInterval = setInterval(() => {
        slideshowProgress += 1;
        document.getElementById("slideshowProgress").style.width = `${slideshowProgress}%`;
        
        if (slideshowProgress >= 100) {
          clearInterval(slideshowProgressInterval);
        }
      }, 50);
    }

    function prevSlide() {
      const slides = document.querySelectorAll(".slideshow-slide");
      
      // Hide current slide
      slides[slideshowCurrentIndex].classList.remove("active");
      
      // Move to previous slide
      slideshowCurrentIndex = (slideshowCurrentIndex - 1 + slides.length) % slides.length;
      
      // Show previous slide
      slides[slideshowCurrentIndex].classList.add("active");
      
      // Restart progress bar
      if (slideshowProgressInterval) {
        clearInterval(slideshowProgressInterval);
      }
      
      document.getElementById("slideshowProgress").style.width = "0%";
      slideshowProgress = 0;
      
      slideshowProgressInterval = setInterval(() => {
        slideshowProgress += 1;
        document.getElementById("slideshowProgress").style.width = `${slideshowProgress}%`;
        
        if (slideshowProgress >= 100) {
          clearInterval(slideshowProgressInterval);
        }
      }, 50);
    }

    // Slideshow controls
    document.getElementById("slideshowClose").addEventListener("click", function() {
      document.getElementById("slideshowModal").classList.remove("active");
      
      // Clear intervals
      if (slideshowInterval) {
        clearInterval(slideshowInterval);
      }
      
      if (slideshowProgressInterval) {
        clearInterval(slideshowProgressInterval);
      }
    });

    document.getElementById("slideshowPlay").addEventListener("click", function() {
      startSlideshow();
    });

    document.getElementById("slideshowPause").addEventListener("click", function() {
      // Clear intervals
      if (slideshowInterval) {
        clearInterval(slideshowInterval);
      }
      
      if (slideshowProgressInterval) {
        clearInterval(slideshowProgressInterval);
      }
    });

    document.getElementById("slideshowFullscreen").addEventListener("click", function() {
      const slideshowContainer = document.querySelector(".slideshow-container");
      
      if (document.fullscreenElement) {
        document.exitFullscreen();
      } else {
        slideshowContainer.requestFullscreen().catch(err => {
          console.error(`Error attempting to enable fullscreen: ${err.message}`);
        });
      }
    });

    // Keyboard navigation for slideshow
    document.addEventListener("keydown", function(e) {
      const slideshowModal = document.getElementById("slideshowModal");
      
      if (slideshowModal.classList.contains("active")) {
        if (e.key === "ArrowRight") nextSlide();
        else if (e.key === "ArrowLeft") prevSlide();
        else if (e.key === "Escape") document.getElementById("slideshowClose").click();
        else if (e.key === " ") {
          e.preventDefault();
          if (slideshowInterval) {
            document.getElementById("slideshowPause").click();
          } else {
            document.getElementById("slideshowPlay").click();
          }
        }
      }
    });

    // Share functionality
    document.getElementById("fabShare").addEventListener("click", function() {
      // Close FAB menu
      document.getElementById("fabMenu").classList.remove("active");
      document.getElementById("fabToggle").querySelector("i").classList.add("fa-plus");
      document.getElementById("fabToggle").querySelector("i").classList.remove("fa-times");
      
      // Create shareable link (in a real app, this would generate a unique URL)
      const shareUrl = window.location.href;
      
      if (navigator.share) {
        navigator.share({
          title: 'Galeri Media Premium',
          text: 'Lihat koleksi media saya',
          url: shareUrl
        })
        .then(() => console.log('Berhasil berbagi'))
        .catch((error) => console.log('Error berbagi:', error));
      } else {
        // Fallback for browsers that don't support Web Share API
        const dummy = document.createElement('input');
        document.body.appendChild(dummy);
        dummy.value = shareUrl;
        dummy.select();
        document.execCommand('copy');
        document.body.removeChild(dummy);
        
        // Show notification
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.textContent = 'Link telah disalin ke clipboard!';
        notification.style.position = 'fixed';
        notification.style.bottom = '2rem';
        notification.style.left = '50%';
        notification.style.transform = 'translateX(-50%)';
        notification.style.backgroundColor = 'var(--success-color)';
        notification.style.color = 'white';
        notification.style.padding = '1rem 2rem';
        notification.style.borderRadius = 'var(--radius)';
        notification.style.boxShadow = 'var(--shadow-lg)';
        notification.style.zIndex = '9999';
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
          notification.style.opacity = '0';
          notification.style.transition = 'opacity 0.5s ease-out';
          setTimeout(() => {
            document.body.removeChild(notification);
          }, 500);
        }, 3000);
      }
    });

    // Export functionality
    document.getElementById("fabExport").addEventListener("click", function() {
      // Close FAB menu
      document.getElementById("fabMenu").classList.remove("active");
      document.getElementById("fabToggle").querySelector("i").classList.add("fa-plus");
      document.getElementById("fabToggle").querySelector("i").classList.remove("fa-times");
      
      // Create export options modal
      const exportModal = document.createElement('div');
      exportModal.className = 'modal active';
      exportModal.innerHTML = `
        <div class="modal-content">
          <div class="modal-header">
            <h3 class="modal-title">Ekspor Galeri</h3>
            <button class="modal-close" id="exportModalClose">
              <i class="fas fa-times"></i>
            </button>
          </div>
          <div class="modal-body">
            <p>Pilih format ekspor:</p>
            <div class="export-options">
              <button class="btn btn-primary" id="exportJson">
                <i class="fas fa-code"></i> JSON
              </button>
              <button class="btn btn-primary" id="exportCsv">
                <i class="fas fa-file-csv"></i> CSV
              </button>
              <button class="btn btn-primary" id="exportHtml">
                <i class="fas fa-file-code"></i> HTML
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(exportModal);
      
      // Close modal handler
      document.getElementById("exportModalClose").addEventListener("click", function() {
        document.body.removeChild(exportModal);
      });
      
      // Export handlers
      document.getElementById("exportJson").addEventListener("click", function() {
        exportAsJson();
        document.body.removeChild(exportModal);
      });
      
      document.getElementById("exportCsv").addEventListener("click", function() {
        exportAsCsv();
        document.body.removeChild(exportModal);
      });
      
      document.getElementById("exportHtml").addEventListener("click", function() {
        exportAsHtml();
        document.body.removeChild(exportModal);
      });
    });

    function exportAsJson() {
      const exportData = filteredFiles.map(metadata => {
        return {
          name: metadata.name,
          size: metadata.size,
          sizeFormatted: metadata.sizeFormatted,
          type: metadata.type,
          lastModified: metadata.lastModified,
          extension: metadata.extension,
          path: metadata.path,
          category: metadata.category
        };
      });
      
      const dataStr = JSON.stringify(exportData, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      
      const exportFileDefaultName = 'galeri-media.json';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    function exportAsCsv() {
      let csvContent = "Name,Size,Type,Last Modified,Extension,Path,Category\n";
      
      filteredFiles.forEach(metadata => {
        const row = [
          metadata.name,
          metadata.size,
          metadata.type,
          new Date(metadata.lastModified).toISOString(),
          metadata.extension,
          metadata.path,
          metadata.category
        ].join(',');
        
        csvContent += row + "\n";
      });
      
      const dataUri = 'data:text/csv;charset=utf-8,'+ encodeURIComponent(csvContent);
      
      const exportFileDefaultName = 'galeri-media.csv';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    function exportAsHtml() {
      let htmlContent = `
        <!DOCTYPE html>
        <html lang="id">
        <head>
          <meta charset="UTF-8">
          <title>Galeri Media</title>
          <style>
            body {
              font-family: 'Inter', sans-serif;
              margin: 0;
              padding: 20px;
              background-color: #f8fafc;
              color: #1e293b;
            }
            h1 {
              color: #2563eb;
            }
            table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            th, td {
              padding: 12px 15px;
              text-align: left;
              border-bottom: 1px solid #e2e8f0;
            }
            th {
              background-color: #f1f5f9;
              font-weight: 600;
            }
            tr:hover {
              background-color: #f8fafc;
            }
          </style>
        </head>
        <body>
          <h1>Galeri Media</h1>
          <p>Total ${filteredFiles.length} file</p>
          <table>
            <thead>
              <tr>
                <th>Nama</th>
                <th>Ukuran</th>
                <th>Tipe</th>
                <th>Tanggal Dimodifikasi</th>
                <th>Ekstensi</th>
                <th>Kategori</th>
              </tr>
            </thead>
            <tbody>
      `;
      
      filteredFiles.forEach(metadata => {
        htmlContent += `
          <tr>
            <td>${metadata.name}</td>
            <td>${metadata.sizeFormatted}</td>
            <td>${metadata.type}</td>
            <td>${new Date(metadata.lastModified).toLocaleString()}</td>
            <td>${metadata.extension}</td>
            <td>${metadata.category}</td>
          </tr>
        `;
      });
      
      htmlContent += `
            </tbody>
          </table>
        </body>
        </html>
      `;
      
      const dataUri = 'data:text/html;charset=utf-8,'+ encodeURIComponent(htmlContent);
      
      const exportFileDefaultName = 'galeri-media.html';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
    }

    // Inisialisasi tema
    document.addEventListener("DOMContentLoaded", function() {
      // Hide loading screen after page loads
      setTimeout(() => {
        document.getElementById("loadingScreen").classList.add("hidden");
      }, 1000);
      
      // Cek preferensi tema yang tersimpan
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
        document.getElementById("themeIcon").className = "fas fa-moon";
      }
      
      // Simpan preferensi tema saat berubah
      document.getElementById("toggleTheme").addEventListener("click", function() {
        const isDark = document.body.classList.contains("dark");
        localStorage.setItem("theme", isDark ? "dark" : "light");
      });
    });
  </script>
</body>
</html>
